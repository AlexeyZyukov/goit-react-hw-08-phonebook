(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{11:function(e,t,n){e.exports={form:"RegisterPageView_form__1_aT9",label:"RegisterPageView_label__3u9cc",input:"RegisterPageView_input__32Whd",button:"RegisterPageView_button__11ug6"}},15:function(e,t,n){e.exports={form:"LoginPageView_form__3cuHZ",label:"LoginPageView_label__2PxE3",input:"LoginPageView_input__33z75",button:"LoginPageView_button__2oWJb"}},23:function(e,t,n){e.exports={userMenuTitle:"userMenu_userMenuTitle__6qshL",userMenu:"userMenu_userMenu__230HB",button:"userMenu_button__2e4oY"}},26:function(e,t,n){e.exports={link:"AuthMenu_link__2HiCh",activeLink:"AuthMenu_activeLink__3P4Du"}},38:function(e,t,n){e.exports={link:"Navigation_link__3DyUu",activeLink:"Navigation_activeLink__p2VN2"}},39:function(e,t,n){e.exports={container:"Container_container__3PBT8"}},40:function(e,t,n){e.exports={barHeader:"AppBar_barHeader__1O8YY"}},43:function(e,t,n){e.exports={loaderWrapper:"Loader_loaderWrapper__2r-H9"}},44:function(e,t,n){e.exports={header:"HomePageView_header__3b-Q1"}},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),s=n.n(c),u=n(21),o=n.n(u),i=n(13),l=n(9),b=n(36),j=n(22),d=n(3),p=n(12),O=n(37),h=n.n(O),f=n(4),m=n(5),g=Object(d.b)("contacts/fetchContactRequest"),x=Object(d.b)("contacts/fetchContactSuccess"),_=Object(d.b)("contacts/fetchContactError"),v=Object(d.b)("contacts/addContactRequest"),k=Object(d.b)("contacts/addContactSuccess"),w=Object(d.b)("contacts/addContactError"),y=Object(d.b)("contacts/delContactRequest"),N=Object(d.b)("contacts/delContactSuccess"),L=Object(d.b)("contacts/delContactError"),C=(Object(d.b)("contacts/DELETE"),Object(d.b)("contacts/FILTER")),P=Object(d.d)([],(a={},Object(f.a)(a,x,(function(e,t){return t.payload})),Object(f.a)(a,k,(function(e,t){var n=t.payload;return e.map((function(e){return e.name})).includes(n.name)?(alert("".concat(n.name," is already in contacts!")),e):[].concat(Object(j.a)(e),[n])})),Object(f.a)(a,N,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),a)),V=Object(d.d)("",Object(f.a)({},C,(function(e,t){return t.payload}))),A=Object(d.d)(!1,(r={},Object(f.a)(r,g,(function(){return!0})),Object(f.a)(r,x,(function(){return!1})),Object(f.a)(r,_,(function(){return!1})),Object(f.a)(r,v,(function(){return!0})),Object(f.a)(r,k,(function(){return!1})),Object(f.a)(r,w,(function(){return!1})),Object(f.a)(r,y,(function(){return!0})),Object(f.a)(r,N,(function(){return!1})),Object(f.a)(r,L,(function(){return!1})),r)),I=Object(m.b)({items:P,filter:V,loading:A}),M=n(10),R=n.n(M),S=n(18),W=n(14),E=n.n(W);E.a.defaults.baseURL="https://connections-api.herokuapp.com";var T,F=function(e){E.a.defaults.headers.Authorization="Bearer ".concat(e)},H=function(){E.a.defaults.headers.Authorization=""},q=Object(d.c)("auth/register",function(){var e=Object(S.a)(R.a.mark((function e(t,n){var a,r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,E.a.post("user/signup",t);case 4:return r=e.sent,c=r.data,F(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a(e.t0.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),z=Object(d.c)("auth/login",function(){var e=Object(S.a)(R.a.mark((function e(t,n){var a,r,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,E.a.post("user/login",t);case 4:return r=e.sent,c=r.data,F(c.token),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",a(e.t0.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(d.c)("auth/logout",function(){var e=Object(S.a)(R.a.mark((function e(t,n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,E.a.post("user/logout");case 4:H(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",a(e.t0.data));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),U=Object(d.c)("auth/refresh",function(){var e=Object(S.a)(R.a.mark((function e(t,n){var a,r,c,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.getState(),null!==(r=a.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return F(r),e.prev=5,e.next=8,E.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue());case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),D={register:q,logIn:z,logOut:B,fetchCurrentUser:U},J={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name}},Z=Object(d.e)({name:"auth",initialState:{user:{name:"",email:""},token:null,isLoggedIn:!1},extraReducers:(T={},Object(f.a)(T,D.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(T,D.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(f.a)(T,D.logOut.fulfilled,(function(e,t){e.user={name:"",email:""},e.token=null,e.isLoggedIn=!1})),Object(f.a)(T,D.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0})),T)}).reducer,Y=Object(j.a)(Object(d.f)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),Q={key:"auth",storage:h.a,whitelist:["token"]},$=Object(d.a)({reducer:{auth:Object(p.g)(Q,Z),contacts:I},middleware:Y,devTools:!1}),G=Object(p.h)($),K=n(2),X=n(38),ee=n.n(X),te=n(1),ne=function(){return Object(te.jsx)(i.b,{to:"/",exact:"true",className:ee.a.link,children:"Home"})},ae=n(39),re=n.n(ae);function ce(e){var t=e.children;return Object(te.jsx)("div",{className:re.a.container,children:t})}var se=n(26),ue=n.n(se);function oe(){return Object(te.jsxs)("div",{children:[Object(te.jsx)(i.b,{exact:"true",to:"/register",className:ue.a.link,children:"Register"}),Object(te.jsx)(i.b,{exact:"true",to:"/login",className:ue.a.link,children:"Login"})]})}var ie=n(23),le=n.n(ie);function be(){var e=Object(l.b)(),t=Object(l.c)(J.getUserName);return Object(te.jsxs)("div",{className:le.a.userMenu,children:[Object(te.jsxs)("span",{className:le.a.userMenuTitle,children:["Welcome, ",t]}),Object(te.jsx)("button",{className:le.a.button,type:"button",onClick:function(){return e(D.logOut())},children:"Log out"})]})}var je=n(40),de=n.n(je);function pe(){var e=Object(l.c)(J.getIsLoggedIn);return Object(te.jsx)(ce,{children:Object(te.jsxs)("div",{className:de.a.barHeader,children:[Object(te.jsx)(ne,{}),e?Object(te.jsx)(be,{}):Object(te.jsx)(oe,{})]})})}var Oe=n(41),he=n(42),fe=n(47),me=n(46),ge=n(45),xe=n(43),_e=n.n(xe),ve=function(e){Object(fe.a)(n,e);var t=Object(me.a)(n);function n(){return Object(Oe.a)(this,n),t.apply(this,arguments)}return Object(he.a)(n,[{key:"render",value:function(){return Object(te.jsx)("div",{className:_e.a.loaderWrapper,children:Object(te.jsx)(ge.a,{color:"#00BFFF",height:100,width:100,timeout:3e3,visible:!0,ariaLabel:"loading"})})}}]),n}(c.Component),ke=n(44),we=n.n(ke);function ye(){return Object(te.jsx)(te.Fragment,{children:Object(te.jsx)("h1",{className:we.a.header,children:"Welcome!"})})}var Ne=n(8),Le=n(11),Ce=n.n(Le);function Pe(){var e=Object(l.b)(),t=Object(c.useState)(""),n=Object(Ne.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),u=Object(Ne.a)(s,2),o=u[0],i=u[1],b=Object(c.useState)(""),j=Object(Ne.a)(b,2),d=j[0],p=j[1],O=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return r(a);case"email":return i(a);case"password":return p(a)}};return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h2",{style:{textAlign:"center",marginTop:20},children:"Register to create an account"}),Object(te.jsx)("br",{}),Object(te.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(D.register({name:a,email:o,password:d})),r(""),i(""),p("")},className:Ce.a.form,autoComplete:"off",children:[Object(te.jsxs)("label",{className:Ce.a.label,children:["Name",Object(te.jsx)("input",{type:"text",name:"name",placeholder:"enter your name",value:a,onChange:O,required:!0,autoFocus:"on",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",className:Ce.a.input})]}),Object(te.jsxs)("label",{className:Ce.a.label,children:["E-mail",Object(te.jsx)("input",{type:"email",name:"email",placeholder:"enter e-mail",value:o,onChange:O,required:!0,className:Ce.a.input})]}),Object(te.jsxs)("label",{className:Ce.a.label,children:["Password",Object(te.jsx)("input",{type:"password",name:"password",placeholder:"create password",value:d,onChange:O,required:!0,className:Ce.a.input})]}),Object(te.jsx)("button",{type:"submit",className:Ce.a.button,children:"Register"})]})]})}var Ve=n(15),Ae=n.n(Ve);function Ie(){return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h2",{style:{textAlign:"center",marginTop:20},children:"Sign in to use Phonebook"}),Object(te.jsxs)("form",{className:Ae.a.form,autoComplete:"off",children:[Object(te.jsxs)("label",{className:Ae.a.label,children:["E-mail",Object(te.jsx)("input",{type:"email",name:"email",placeholder:"enter e-mail",className:Ae.a.input,autoFocus:"on"})]}),Object(te.jsxs)("label",{className:Ae.a.label,children:["Password",Object(te.jsx)("input",{type:"password",name:"password",placeholder:"enter password",className:Ae.a.input})]}),Object(te.jsx)("button",{type:"submit",className:Ae.a.button,children:"Login"})]})]})}function Me(){return Object(te.jsxs)(ce,{children:[Object(te.jsx)(pe,{}),Object(te.jsx)(c.Suspense,{fallback:Object(te.jsx)(ve,{}),children:Object(te.jsxs)(K.c,{children:[Object(te.jsx)(K.a,{path:"/",exact:"true",element:Object(te.jsx)(ye,{})}),Object(te.jsx)(K.a,{path:"/register",element:Object(te.jsx)(Pe,{})}),Object(te.jsx)(K.a,{path:"/login",element:Object(te.jsx)(Ie,{})})]})})]})}n(77);o.a.render(Object(te.jsx)(s.a.StrictMode,{children:Object(te.jsx)(l.a,{store:$,children:Object(te.jsx)(b.a,{loading:null,persistor:G,children:Object(te.jsx)(i.a,{children:Object(te.jsx)(Me,{})})})})}),document.querySelector("#root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.01fccc28.chunk.js.map